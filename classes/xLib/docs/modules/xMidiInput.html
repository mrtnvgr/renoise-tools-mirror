<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>ldoc</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
<li><a href="#Tables">Tables</a></li>
<li><a href="#Fields">Fields</a></li>
</ul>


<h2>Modules</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../modules/xAudioDevice.html">xAudioDevice</a></li>
  <li><a href="../modules/xBlockLoop.html">xBlockLoop</a></li>
  <li><a href="../modules/xDebug.html">xDebug</a></li>
  <li><a href="../modules/xDocument.html">xDocument</a></li>
  <li><a href="../modules/xEffectColumn.html">xEffectColumn</a></li>
  <li><a href="../modules/xFilesystem.html">xFilesystem</a></li>
  <li><a href="../modules/xInstrument.html">xInstrument</a></li>
  <li><a href="../modules/xLib.html">xLib</a></li>
  <li><a href="../modules/xLine.html">xLine</a></li>
  <li><a href="../modules/xLineAutomation.html">xLineAutomation</a></li>
  <li><a href="../modules/xLinePattern.html">xLinePattern</a></li>
  <li><a href="../modules/xMessage.html">xMessage</a></li>
  <li><strong>xMidiInput</strong></li>
  <li><a href="../modules/xMidiMessage.html">xMidiMessage</a></li>
  <li><a href="../modules/xNoteColumn.html">xNoteColumn</a></li>
  <li><a href="../modules/xObservable.html">xObservable</a></li>
  <li><a href="../modules/xOscClient.html">xOscClient</a></li>
  <li><a href="../modules/xOscDevice.html">xOscDevice</a></li>
  <li><a href="../modules/xOscMessage.html">xOscMessage</a></li>
  <li><a href="../modules/xOscPattern.html">xOscPattern</a></li>
  <li><a href="../modules/xOscRouter.html">xOscRouter</a></li>
  <li><a href="../modules/xOscValue.html">xOscValue</a></li>
  <li><a href="../modules/xParseXML.html">xParseXML</a></li>
  <li><a href="../modules/xPhrase.html">xPhrase</a></li>
  <li><a href="../modules/xPhraseMgr.html">xPhraseMgr</a></li>
  <li><a href="../modules/xPreferences.html">xPreferences</a></li>
  <li><a href="../modules/xReflection.html">xReflection</a></li>
  <li><a href="../modules/xRule.html">xRule</a></li>
  <li><a href="../modules/xRules.html">xRules</a></li>
  <li><a href="../modules/xRuleset.html">xRuleset</a></li>
  <li><a href="../modules/xSample.html">xSample</a></li>
  <li><a href="../modules/xSampleMapping.html">xSampleMapping</a></li>
  <li><a href="../modules/xSandbox.html">xSandbox</a></li>
  <li><a href="../modules/xScale.html">xScale</a></li>
  <li><a href="../modules/xSongPos.html">xSongPos</a></li>
  <li><a href="../modules/xStreamPos.html">xStreamPos</a></li>
  <li><a href="../modules/xTrack.html">xTrack</a></li>
  <li><a href="../modules/xValue.html">xValue</a></li>
  <li><a href="../modules/xVoice.html">xVoice</a></li>
  <li><a href="../modules/xVoiceManager.html">xVoiceManager</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>xMidiInput</code></h1>
<p>Use xMidiInput to interpret MIDI messages
.</p>
<p>

<h1></h1>

<p>, support all common MIDI messages (including 14-bit)</p>

<p>  Note that the multibyte/NRPN features require an extra bit of processing, and can delay the processing of "normal" (7-bit) messages - for this reason, the 14-bit processing is disabled by default. </p>

<h3>How to use</h3>

<p>The class is implemented with a callback, which will recieve xMidiMessages</p>

<pre><code>-- define our callback
myCallback = function(msg)
  -- do something with the message
end

-- Then, instantiate this class with the callback as argument:
myMidiInput = xMidiInput(myCallback)

-- Now you can feed it with raw midi messages:
myMidiInput:input({0x90,0x45,0x6F})
</code></pre>


<h3>See also</h3>

<p><a href="../modules/xMidiMessage.html#">xMidiMessage</a></p>

</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#input">input (msg, port_name)</a></td>
	<td class="summary">process incoming message - will invoke the callback function when able
 to construct a xMidiMessage from the data that has been received</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#_create_fingerprint">_create_fingerprint (msg_type, midi_msgs)</a></td>
	<td class="summary">Create MIDI 'fingerprint' for the provided message(s)
 (just enough information to identify the CC/NRPN source)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#assemble_nrpn_message">assemble_nrpn_message (match_nrpn_num)</a></td>
	<td class="summary">(Re)construct the table of MIDI messages that together form a complete
 NRPN message (compares the provided number with the active NRPN messages)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#add_multibyte_exempt">add_multibyte_exempt (msg_type, msgs)</a></td>
	<td class="summary">convenience method for adding messages to the exempt list</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#on_idle">on_idle ()</a></td>
	<td class="summary">Idle loop : process (or discard) multibyte messages,
  output messages which got delayed due to throttling</td>
	</tr>
</table>
<h2><a href="#Tables">Tables</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#self._multibyte_exempted">self._multibyte_exempted</a></td>
	<td class="summary">(table) messages that should never be interpreted as multibyte</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self._nrpn_msb_only">self._nrpn_msb_only</a></td>
	<td class="summary">table<fingerprint> NRPN messages that only require the MSB part (7-bit)
 note that 7bit NRPN works without this, but might be a bit sluggish as
 we need to wait for the idle mode to determine that no LSB part arrived</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self._mb_messages">self._mb_messages</a></td>
	<td class="summary">
<p>table of multibyte messages</p>
<pre><code>[fingerprint]{
  type      = [enum] msg_type
  timestamp = [number]
  channel   = [int]
  num       = [int] (only for CC messages)
  lsb       = [int]
  msb       = [int]
  port_name = [string]
}
</code></pre>
</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self._nrpn_messages">self._nrpn_messages</a></td>
	<td class="summary">
<p>table of NRPN messages</p>
<pre><code>{
  timestamp = [number]
  channel   = [int]
  num_msb   = [int]
  num_lsb   = [int]
  data_msb  = {int]
  data_lsb  = [int]
  port_name = [string]
}
</code></pre>
</td>
	</tr>
</table>
<h2><a href="#Fields">Fields</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#self.callback_fn">self.callback_fn</a></td>
	<td class="summary">(function) specify where messages should go</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.multibyte_enabled">self.multibyte_enabled</a></td>
	<td class="summary">(bool) decide if multibyte (14-bit) support is enabled</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.nrpn_enabled">self.nrpn_enabled</a></td>
	<td class="summary">(bool) decide if NRPN support is enabled</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.terminate_nrpns">self.terminate_nrpns</a></td>
	<td class="summary">(bool) true when we expect a Null value from the device
 after receiving or transmitting a NRPN message
 (enabling this feature will transmit Null values too)
 important: only enable this feature if the device is known to transmit
 these messages (midi bytes 2&amp;3: 0x65,0x7F followed by 0x64,0x7F)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#self.timeout">self.timeout</a></td>
	<td class="summary">number, the amount of time that should pass before we consider a
 multibyte message obsolete (0.1 = tenth of a second)</td>
	</tr>
</table>

<br/>
<br/>


    <h2><a name="Functions"></a>Functions</h2>
    <dl class="function">
    <dt>
    <a name = "input"></a>
    <strong>input (msg, port_name)</strong>
    </dt>
    <dd>
    process incoming message - will invoke the callback function when able
 to construct a xMidiMessage from the data that has been received


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">msg</span>
         (table), raw MIDI message with 3 parts
        </li>
        <li><span class="parameter">port_name</span>
         (string), where message originated from
        </li>
    </ul>





</dd>
    <dt>
    <a name = "_create_fingerprint"></a>
    <strong>_create_fingerprint (msg_type, midi_msgs)</strong>
    </dt>
    <dd>
    Create MIDI 'fingerprint' for the provided message(s)
 (just enough information to identify the CC/NRPN source)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">msg_type</span>



        </li>
        <li><span class="parameter">midi_msgs</span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        string
    </ol>




</dd>
    <dt>
    <a name = "assemble_nrpn_message"></a>
    <strong>assemble_nrpn_message (match_nrpn_num)</strong>
    </dt>
    <dd>
    (Re)construct the table of MIDI messages that together form a complete
 NRPN message (compares the provided number with the active NRPN messages)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">match_nrpn_num</span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        table or nil
[[
    </ol>




</dd>
    <dt>
    <a name = "add_multibyte_exempt"></a>
    <strong>add_multibyte_exempt (msg_type, msgs)</strong>
    </dt>
    <dd>
    convenience method for adding messages to the exempt list


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">msg_type</span>



        </li>
        <li><span class="parameter">msgs</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "on_idle"></a>
    <strong>on_idle ()</strong>
    </dt>
    <dd>
    Idle loop : process (or discard) multibyte messages,
  output messages which got delayed due to throttling







</dd>
</dl>
    <h2><a name="Tables"></a>Tables</h2>
    <dl class="function">
    <dt>
    <a name = "self._multibyte_exempted"></a>
    <strong>self._multibyte_exempted</strong>
    </dt>
    <dd>
    (table) messages that should never be interpreted as multibyte







</dd>
    <dt>
    <a name = "self._nrpn_msb_only"></a>
    <strong>self._nrpn_msb_only</strong>
    </dt>
    <dd>
    table<fingerprint> NRPN messages that only require the MSB part (7-bit)
 note that 7bit NRPN works without this, but might be a bit sluggish as
 we need to wait for the idle mode to determine that no LSB part arrived







</dd>
    <dt>
    <a name = "self._mb_messages"></a>
    <strong>self._mb_messages</strong>
    </dt>
    <dd>

<p>table of multibyte messages</p>
<pre><code>[fingerprint]{
  type      = [enum] msg_type
  timestamp = [number]
  channel   = [int]
  num       = [int] (only for CC messages)
  lsb       = [int]
  msb       = [int]
  port_name = [string]
}
</code></pre>








</dd>
    <dt>
    <a name = "self._nrpn_messages"></a>
    <strong>self._nrpn_messages</strong>
    </dt>
    <dd>

<p>table of NRPN messages</p>
<pre><code>{
  timestamp = [number]
  channel   = [int]
  num_msb   = [int]
  num_lsb   = [int]
  data_msb  = {int]
  data_lsb  = [int]
  port_name = [string]
}
</code></pre>








</dd>
</dl>
    <h2><a name="Fields"></a>Fields</h2>
    <dl class="function">
    <dt>
    <a name = "self.callback_fn"></a>
    <strong>self.callback_fn</strong>
    </dt>
    <dd>
    (function) specify where messages should go







</dd>
    <dt>
    <a name = "self.multibyte_enabled"></a>
    <strong>self.multibyte_enabled</strong>
    </dt>
    <dd>
    (bool) decide if multibyte (14-bit) support is enabled







</dd>
    <dt>
    <a name = "self.nrpn_enabled"></a>
    <strong>self.nrpn_enabled</strong>
    </dt>
    <dd>
    (bool) decide if NRPN support is enabled







</dd>
    <dt>
    <a name = "self.terminate_nrpns"></a>
    <strong>self.terminate_nrpns</strong>
    </dt>
    <dd>
    (bool) true when we expect a Null value from the device
 after receiving or transmitting a NRPN message
 (enabling this feature will transmit Null values too)
 important: only enable this feature if the device is known to transmit
 these messages (midi bytes 2&amp;3: 0x65,0x7F followed by 0x64,0x7F)







</dd>
    <dt>
    <a name = "self.timeout"></a>
    <strong>self.timeout</strong>
    </dt>
    <dd>
    number, the amount of time that should pass before we consider a
 multibyte message obsolete (0.1 = tenth of a second)







</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.2</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
